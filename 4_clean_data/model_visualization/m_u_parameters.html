<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.8.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "discreteHeight": 300, "discreteWidth": 400}, "header": {"title": null}, "title": {"anchor": "middle", "offset": 10}}, "hconcat": [{"mark": "bar", "encoding": {"color": {"value": "green"}, "row": {"field": "comparison_name", "header": {"labelAlign": "left", "labelAnchor": "middle", "labelAngle": 0}, "sort": {"field": "comparison_sort_order"}, "type": "nominal"}, "tooltip": [{"field": "m_probability_description", "title": "m probability description", "type": "nominal"}, {"field": "comparison_name", "title": "Comparison column name", "type": "nominal"}, {"field": "label_for_charts", "title": "Label", "type": "ordinal"}, {"field": "sql_condition", "title": "SQL condition", "type": "nominal"}, {"field": "m_probability", "format": ".4p", "title": "m probability", "type": "quantitative"}, {"field": "u_probability", "format": ".4p", "title": "u probability", "type": "quantitative"}, {"field": "bayes_factor", "format": ",.4f", "title": "Bayes factor = m/u", "type": "quantitative"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Match weight = log2(m/u)", "type": "quantitative"}], "x": {"axis": {"title": "Proportion of record comparisons"}, "field": "m_probability", "type": "quantitative"}, "y": {"axis": {"title": null}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": {"step": 12}, "resolve": {"scale": {"y": "independent"}}, "title": {"text": "Amongst matching record comparisons:", "fontSize": 12, "fontWeight": "bold"}, "transform": [{"filter": "(datum.bayes_factor != 'no-op filter due to vega lite issue 4680')"}], "width": 150}, {"mark": "bar", "encoding": {"color": {"value": "red"}, "row": {"field": "comparison_name", "header": {"labels": false}, "sort": {"field": "comparison_sort_order"}, "type": "nominal"}, "tooltip": [{"field": "u_probability_description", "title": "u probability description", "type": "nominal"}, {"field": "comparison_name", "title": "Comparison column name", "type": "nominal"}, {"field": "label_for_charts", "title": "Label", "type": "ordinal"}, {"field": "sql_condition", "title": "SQL condition", "type": "nominal"}, {"field": "m_probability", "format": ".4p", "title": "m probability", "type": "quantitative"}, {"field": "u_probability", "format": ".4p", "title": "u probability", "type": "quantitative"}, {"field": "bayes_factor", "format": ",.4f", "title": "Bayes factor = m/u", "type": "quantitative"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Match weight = log2(m/u)", "type": "quantitative"}], "x": {"axis": {"title": "Proportion of record comparisons"}, "field": "u_probability", "type": "quantitative"}, "y": {"axis": {"title": null}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": {"step": 12}, "resolve": {"scale": {"y": "independent"}}, "title": {"text": "Amongst non-matching record comparisons:", "fontSize": 12, "fontWeight": "bold"}, "transform": [{"filter": "(datum.bayes_factor != 'no-op filter2 due to vega lite issue 4680')"}], "width": 150}], "data": {"name": "data-cf58e821f5f7d4efcb6a9b8c72a59f3e"}, "title": {"text": "Proportion of record comparisons in each comparison level by match status", "subtitle": "(m and u probabilities)"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json", "datasets": {"data-cf58e821f5f7d4efcb6a9b8c72a59f3e": [{"comparison_name": "name", "sql_condition": "name_l = name_r", "label_for_charts": "Exact match", "m_probability": 0.05512854683545312, "u_probability": 4.1009938074993504e-05, "m_probability_description": "Amongst matching record comparisons, 5.51% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.00% of records are in the exact match comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1344.2728622179673, "log2_bayes_factor": 10.392610292580477, "comparison_vector_value": 5, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `exact match` then comparison is 1,344.27 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 0}, {"comparison_name": "name", "sql_condition": "jaro_winkler(name_l, name_r) >= 0.9", "label_for_charts": "Jaro Winkler similarity >= to 0.9", "m_probability": 0.1190456341093608, "u_probability": 0.0024742662638579417, "m_probability_description": "Amongst matching record comparisons, 11.90% of records are in the jaro winkler similarity >= to 0.9 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.25% of records are in the jaro winkler similarity >= to 0.9 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 48.113509790066686, "log2_bayes_factor": 5.588370140036676, "comparison_vector_value": 4, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `jaro winkler similarity >= to 0.9` then comparison is 48.11 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 0}, {"comparison_name": "name", "sql_condition": "jaro_winkler(name_l, name_r) >= 0.8", "label_for_charts": "Jaro Winkler similarity >= 0.8", "m_probability": 0.2018817500339764, "u_probability": 0.054666247453966345, "m_probability_description": "Amongst matching record comparisons, 20.19% of records are in the jaro winkler similarity >= 0.8 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 5.47% of records are in the jaro winkler similarity >= 0.8 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 3.6929871618493313, "log2_bayes_factor": 1.8847882472257638, "comparison_vector_value": 3, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `jaro winkler similarity >= 0.8` then comparison is 3.69 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 0}, {"comparison_name": "name", "sql_condition": "damerau_levenshtein(name_l, name_r) <= 3", "label_for_charts": "Damerau Levenshtein distance <= 3", "m_probability": 0.0014479679882142943, "u_probability": 4.1009938074993504e-05, "m_probability_description": "Amongst matching record comparisons, 0.14% of records are in the damerau levenshtein distance <= 3 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.00% of records are in the damerau levenshtein distance <= 3 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 35.30773408061343, "log2_bayes_factor": 5.141912332140159, "comparison_vector_value": 2, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `damerau levenshtein distance <= 3` then comparison is 35.31 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 0}, {"comparison_name": "name", "sql_condition": "damerau_levenshtein(name_l, name_r) <= 5", "label_for_charts": "Damerau Levenshtein distance <= 5", "m_probability": 0.026902449355565634, "u_probability": 0.000888548658291526, "m_probability_description": "Amongst matching record comparisons, 2.69% of records are in the damerau levenshtein distance <= 5 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.09% of records are in the damerau levenshtein distance <= 5 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 30.276844272426043, "log2_bayes_factor": 4.92014293727251, "comparison_vector_value": 1, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `damerau levenshtein distance <= 5` then comparison is 30.28 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 0}, {"comparison_name": "name", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.5955936516774298, "u_probability": 0.9418889177477342, "m_probability_description": "Amongst matching record comparisons, 59.56% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 94.19% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.632339589578808, "log2_bayes_factor": -0.6612285481557358, "comparison_vector_value": 0, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  1.58 times less likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 0}, {"comparison_name": "caregiver", "sql_condition": "`caregiver_l` = `caregiver_r`", "label_for_charts": "Exact match caregiver", "m_probability": 0.0026333268873315573, "u_probability": 0.00014888152752447241, "m_probability_description": "Amongst matching record comparisons, 0.26% of records are in the exact match caregiver comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.01% of records are in the exact match caregiver comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 17.687398370484235, "log2_bayes_factor": 4.144649953315578, "comparison_vector_value": 5, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `exact match caregiver` then comparison is 17.69 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 1}, {"comparison_name": "caregiver", "sql_condition": "damerau_levenshtein(`caregiver_l`, `caregiver_r`) <= 3", "label_for_charts": "Damerau_levenshtein <= 3", "m_probability": 0.01274069755562989, "u_probability": 0.006178583392265605, "m_probability_description": "Amongst matching record comparisons, 1.27% of records are in the damerau_levenshtein <= 3 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.62% of records are in the damerau_levenshtein <= 3 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 2.062074224259688, "log2_bayes_factor": 1.0440962633772723, "comparison_vector_value": 4, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `damerau_levenshtein <= 3` then comparison is 2.06 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 1}, {"comparison_name": "caregiver", "sql_condition": "damerau_levenshtein(`caregiver_l`, `caregiver_r`) <= 5", "label_for_charts": "Damerau_levenshtein <= 5", "m_probability": 0.02807959931978663, "u_probability": 0.018734258880162776, "m_probability_description": "Amongst matching record comparisons, 2.81% of records are in the damerau_levenshtein <= 5 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 1.87% of records are in the damerau_levenshtein <= 5 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.4988369435590214, "log2_bayes_factor": 0.5838434429828503, "comparison_vector_value": 3, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `damerau_levenshtein <= 5` then comparison is 1.50 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 1}, {"comparison_name": "caregiver", "sql_condition": "jaro_winkler(`caregiver_l`, `caregiver_r`) >= 0.9", "label_for_charts": "Jaro_winkler >= 0.9", "m_probability": 0.0068734414369431346, "u_probability": 0.004937903996228335, "m_probability_description": "Amongst matching record comparisons, 0.69% of records are in the jaro_winkler >= 0.9 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.49% of records are in the jaro_winkler >= 0.9 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.3919755107011396, "log2_bayes_factor": 0.47713382979238267, "comparison_vector_value": 2, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `jaro_winkler >= 0.9` then comparison is 1.39 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 1}, {"comparison_name": "caregiver", "sql_condition": "jaro_winkler(`caregiver_l`, `caregiver_r`) >= 0.8", "label_for_charts": "Jaro_winkler >= 0.8", "m_probability": 0.050786652127629464, "u_probability": 0.043647101152591156, "m_probability_description": "Amongst matching record comparisons, 5.08% of records are in the jaro_winkler >= 0.8 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 4.36% of records are in the jaro_winkler >= 0.8 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.1635744593914334, "log2_bayes_factor": 0.21856353455728628, "comparison_vector_value": 1, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `jaro_winkler >= 0.8` then comparison is 1.16 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 1}, {"comparison_name": "caregiver", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.8988862826726793, "u_probability": 0.9263532710512277, "m_probability_description": "Amongst matching record comparisons, 89.89% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 92.64% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.9703493373026267, "log2_bayes_factor": -0.043423866698405054, "comparison_vector_value": 0, "max_comparison_vector_value": 5, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  1.03 times less likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 1}, {"comparison_name": "fup", "sql_condition": "`fup_l` = `fup_r`", "label_for_charts": "Exact match", "m_probability": 0.8142352033224152, "u_probability": 0.8531035595091873, "m_probability_description": "Amongst matching record comparisons, 81.42% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 85.31% of records are in the exact match comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.954438877023167, "log2_bayes_factor": -0.0672752855652376, "comparison_vector_value": 1, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `exact match` then comparison is  1.05 times less likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 2}, {"comparison_name": "fup", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.18576479667758494, "u_probability": 0.14689644049081277, "m_probability_description": "Amongst matching record comparisons, 18.58% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 14.69% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.2645969913015223, "log2_bayes_factor": 0.33867769220359356, "comparison_vector_value": 0, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is 1.26 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 2}, {"comparison_name": "vacdate", "sql_condition": "`vacdate_l` = `vacdate_r`", "label_for_charts": "Exact match", "m_probability": 0.010089370885852067, "u_probability": 0.0010421706926713068, "m_probability_description": "Amongst matching record comparisons, 1.01% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.10% of records are in the exact match comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 9.681111699649552, "log2_bayes_factor": 3.2751727243058313, "comparison_vector_value": 1, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `exact match` then comparison is 9.68 times more likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 3}, {"comparison_name": "vacdate", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.9899106291141478, "u_probability": 0.9989578293073287, "m_probability_description": "Amongst matching record comparisons, 98.99% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 99.90% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.9909433612433328, "log2_bayes_factor": -0.01312549437622073, "comparison_vector_value": 0, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  1.01 times less likely to be a match", "probability_two_random_records_match": 0.0001, "comparison_sort_order": 3}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>